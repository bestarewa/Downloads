if (self.CavalryLogger) { CavalryLogger.start_js(["0bLkJ"]); }

__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MercuryUnseenState","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","PhotoResizeModeConst","RTWebLoggingComponent","RTWebLoggingSurface","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){b("MessengerSettingsStore").getSettings().sound_enabled&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a,!1)}function q(a,c,d){__p&&__p();if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} to {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} to your group",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d.timestamp)})}a={init:function(a){this._viewer=a,this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer),this._unseenState=b("MercuryUnseenState").getForFBID(this._viewer),this._highResImageMap=new Map(),this._shouldMarkAllAsSeenWhenActive=!0,this._shouldUpdateFavicon=!0,this._shouldUpdateTitle=!0,b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MessengerBrowserAlerts")),b("Event").listen(window,"focus",function(){o(),clearInterval(m)}),b("Event").listen(window,"blur",function(){m=setInterval(o,k)}),this._threadInformer.subscribe("messages-received",function(a,b){for(var c in b)b[c].forEach(function(a){this.handleMessageReceived(a)}.bind(this))}.bind(this)),this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this))},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(c||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;b("MessengerState.bs").getThreadMeta(this._viewer,a.thread_id,function(c){__p&&__p();if(b("MercuryThreadInfo").isMuted(c))if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===this._viewer}.bind(this)))return}else return;var d=b("CurrentUser").getID();b("MessengerState.bs").compute(d,function(e){e=e.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(d,e,c))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?this._attemptDesktopNotification(c,a):a.log_message_type!==b("MercuryLogMessageType").UNSUBSCRIBE&&p(a.timestamp);!b("UserActivity").isOnTab()&&this._unseenState.getUnseenCount()>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&this._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))}.bind(this))}.bind(this))}.bind(this))},showRTCNotification:function(a,c){__p&&__p();if(b("UserActivity").isOnTab()){c(null);return}var d=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(d){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var e=a.peerID;if(!this._highResImageMap.has(e)){d=function(b,d){this._highResImageMap.set(e.toString(),d.uri),this._displayRTCDesktopNotification(d.uri,a,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(e).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(d.bind(null,e)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(e),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){__p&&__p();var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i;c.isVideoCall?c.isGroupCall?i=g._("Incoming Group Video Chat"):i=g._("Incoming Video Call"):c.isGroupCall?i=g._("Incoming Group Call"):i=g._("Incoming Audio Call");f=g._("{caller} is calling you. Click to answer.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onShow:function(){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logImpression({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),page:a.getPage(),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION})},"MessengerBrowserAlerts")},onClick:function(){window.focus(),b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logClick({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),page:a.getPage(),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION,component:b("RTWebLoggingComponent").ACCEPT})},"MessengerBrowserAlerts"),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){__p&&__p();var a=this._unseenState.getUnseenCount();if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&a>0){this._updateFavicon(0);this._unseenState.markAsSeen();return}this._shouldUpdateTitle&&b("DocumentTitle").badge(a);this._updateFavicon(a);n&&a===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&a>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this._focusToken&&this._focusToken.unsubscribe(),this._focusToken=null,this._unseenState.markAsSeen())}.bind(this)))},_attemptDesktopNotification:function(a,c){if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var d=function(b,d){this._highResImageMap.set(a.snippet_sender,d.uri),q(a,d.uri,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(d.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("MessengerReasonDialogContainerReact.bs",["bs_list","bs_array","bs_block","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerReasonDialogContainer");function h(){__p&&__p();return[g[0],g[1],g[2],g[3],function(a){return b("MessengerDialogs.bs").addHandler(function(c){return b("bs_curry")._1(a[3],[c])})},g[5],g[6],g[7],function(a){a=a[1];if(a)return b("React").createElement("div",undefined,b("bs_array").mapi(function(a,c){return b("React").createElement("span",{key:String(a)},b("bs_curry")._1(c,0))},b("bs_array").of_list(b("bs_list").rev(a[0]))));else return null},function(){return 0},g[10],function(a,c){return b("bs_block").__(0,[a[0]])},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(){return h([])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;function a(a){"use strict";this.$1=a,this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a),b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}}),this.$3=b("MercuryThreadIDMap").getForFBID(a)}a.prototype.getFBID=function(){"use strict";return this.$1};a.prototype.getThreadIDMap=function(){"use strict";return this.$3};a.prototype.getAllThreadSearchResults=function(a,b){"use strict";a&&n(this.$1,a,l,0,b)};a.prototype.getAllLocalThreadSearchResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};a.prototype.getAllThreadSearchMoreResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};a.prototype.getSingleThreadSearchResults=function(a,b,c){"use strict";if(!a||!b)return;o.call(this,a,b,k,0,c)};a.prototype.getSingleThreadSearchMoreResults=function(a,b,c){"use strict";__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};a.prototype.countSnippetsMatchingQueryInThread=function(a,b){"use strict";b=i[b][a];if(b)return b.num_total_snippets};a.prototype.findIndexOfSnippet=function(a,b,c,d){"use strict";d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};a.prototype.findSnippetAtIndex=function(a,b,c,d){"use strict";q(a,b,c),r.call(this,a,b,c,d)};a.prototype.handleUpdate=function(a){"use strict";__p&&__p();if(a.graphql_payload){var c=(a.graphql_payload.message_threads||[]).map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(this.$1,c,a.is_page)}.bind(this));this.$2.handleUpdate({threads:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var d=a.search_snippets||{};Object.keys(d).filter(function(a){return!!d[a]}).forEach(function(a){Object.keys(d[a]).forEach(function(b){if(!d[a][b].snippets)return;d[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});c=a.offset;var e=[];for(var f in d){var g=d[f];for(var h in g){var j=g[h],k=a.other_user_fbid||a.thread_fbid,l=this.$3.getClientIDFromServerIDNow(h),m=j.snippets,n=t(f,l),o=n.getCurrentArraySize();if(!k){e.push(l);if(o)continue}else if(c!=o)continue;l=i[l][f];l.num_total_snippets=j.num_total_snippets;j=m?m.length:0;j>0&&n.addResourcesWithoutSorting(m,o);(!k||a.limit>j)&&(n.getCurrentArraySize()==l.num_total_snippets&&n.setReachedEndOfArray())}if(!k){m=s(f);o=m.getCurrentArraySize();c==o&&(m.addResourcesWithoutSorting(e,o),a.limit>e.length&&m.setReachedEndOfArray())}}};function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,b,c,d,e){__p&&__p();if(j&&j.thread_id){var f=t(j.query,j.thread_id);f.unsubscribe(j.subscriber_id);j=null}var f=t(a,b),g=d+c;g=f.executeOrEnqueue(0,g,function(){var d=f.getAllResources(),c=i[b][a].num_total_snippets;e(d,c)});var h=f.getUnavailableResources(g);if(h.length){j={query:a,thread_id:b,subscriber_id:g};h=this.getThreadIDMap().getServerIDFromClientIDNow(b);g={query:a,snippetOffset:d,snippetLimit:c,thread_fbid:h,identifier:"thread_fbid"};u(g,this.getFBID())}}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("P2PNUXRendererUtils",["CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getTransferFromMessage:function(a){var c;if(!a||!a.attachments||!a.attachments.length)return null;a=a.attachments[0];this.isShareAttachment(a)&&(c=a.share.target);c&&(c=new(b("ImmutableObject"))(c));return c},isSuccessfulReceivedTransfer:function(a){return a&&a.receiver&&a.receiver.id===b("CurrentUser").getID()&&(a.status===b("P2PTransferStatus").COMPLETED||a.status===b("P2PTransferStatus").PENDING_RECIPIENT_NUX)},isShareAttachment:function(a){return!!(typeof a!=="string"&&a.attach_type==b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list&&a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>=0)},doesNUXNeedCreditCards:function(a){var c=b("CurrentUser").getID()===a.sender.id;return!c&&a[b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX},isRecipientActionableStatus:function(a){var c=a[b("P2PTransferParam").STATUS];a=b("CurrentUser").getID()===a.sender.id;return!a&&(c===b("P2PTransferStatus").PENDING_RECIPIENT_NUX||c===b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION||c===b("P2PTransferStatus").PENDING_PUSH_FAIL)}};e.exports=a}),null);
__d("P2PPaymentMethodCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREDIT_CARD:"credit_card",DEBIT_CARD:"debit_card",PREPAID_CARD:"prepaid_card",STORED_VALUE_ACCOUNT:"stored_value_account",PAYPAL_BA:"paypal_ba"})}),null);
__d("P2PCreditCard",["fbt","ix","CreditCardFormParam","CreditCardTypeEnum","P2PPaymentMethodCategory","PaymentMethodUtils"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={visa:{image:h("95537"),imageLarge:h("95538"),name:"Visa"},mc:{image:h("95521"),imageLarge:h("95522"),name:"MasterCard"},disc:{image:h("95512"),imageLarge:h("95513"),name:"Discover"},jcb:{image:h("95518"),imageLarge:h("95519"),name:"JCB"},amex:{image:h("95501"),imageLarge:h("95502"),name:"American Express"},unknown:{image:h("26967"),imageLarge:h("26967"),name:g._("Unknown Card Type")}};function a(a){this.setCredentialId(a[b("CreditCardFormParam").CREDENTIAL_ID]),this.setCardType(a[b("CreditCardFormParam").CARD_TYPE]),this.setCreditCardNumber(a[b("CreditCardFormParam").CARD_NUMBER]),this.setSelected(a.selected),this.setZipCode(a[b("CreditCardFormParam").ZIP]),this.setCSC(a[b("CreditCardFormParam").CSC]),this.setExp(a[b("CreditCardFormParam").CARD_EXPIRATION]),this.setIsPreset(a.isPreset),this.setIsVerified(a.isVerified),this.setIsMobileVerified(a.isMobileVerified),this.setIsPersonalTransferEligible(a.isPersonalTransferEligible),this.setCategory(a.category)}a.prototype.getCreditCardNumber=function(){return this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.setCreditCardNumber=function(a){a=a.replace(/ /g,""),this.setCardProviderProps(this[b("CreditCardFormParam").CARD_TYPE],a),a=a.substr(a.length-4),this[b("CreditCardFormParam").CARD_NUMBER]=a};a.prototype.setCardProviderProps=function(a,b){a=this.$1(a,b);i[a]&&(this.setImage(i[a].image),this.setImageLarge(i[a].imageLarge),this.setName(i[a].name))};a.prototype.getExp=function(){return this[b("CreditCardFormParam").CARD_EXPIRATION]};a.prototype.getExpFormatted=function(){var a=this[b("CreditCardFormParam").CARD_EXPIRATION];return a?a[b("CreditCardFormParam").MONTH]+"/"+a[b("CreditCardFormParam").YEAR]:""};a.prototype.getExpFormattedShort=function(){var a=this[b("CreditCardFormParam").CARD_EXPIRATION],c="";a&&a[b("CreditCardFormParam").MONTH]&&a[b("CreditCardFormParam").YEAR]&&(c=a[b("CreditCardFormParam").MONTH]+"/",a[b("CreditCardFormParam").YEAR].length===4?c+=a[b("CreditCardFormParam").YEAR].substr(2):c+=a[b("CreditCardFormParam").YEAR]);return c};a.prototype.setExp=function(a){if(!a)return;var c={};c[b("CreditCardFormParam").MONTH]=a[b("CreditCardFormParam").MONTH];c[b("CreditCardFormParam").YEAR]=a[b("CreditCardFormParam").YEAR];c[b("CreditCardFormParam").MONTH]&&c[b("CreditCardFormParam").MONTH].length===1&&(c[b("CreditCardFormParam").MONTH]="0"+c[b("CreditCardFormParam").MONTH]);c[b("CreditCardFormParam").YEAR]&&c[b("CreditCardFormParam").YEAR].length===2&&(a=new Date().getFullYear()+"",a=a.substr(0,2),c[b("CreditCardFormParam").YEAR]=a+c[b("CreditCardFormParam").YEAR]);this[b("CreditCardFormParam").CARD_EXPIRATION]=c};a.prototype.getCSC=function(){return this[b("CreditCardFormParam").CSC]};a.prototype.setCSC=function(a){this[b("CreditCardFormParam").CSC]=a};a.prototype.getZipCode=function(){return this[b("CreditCardFormParam").ZIP]};a.prototype.setZipCode=function(a){this[b("CreditCardFormParam").ZIP]=a};a.prototype.getSelected=function(){return this.$2};a.prototype.setSelected=function(a){this.$2=a};a.prototype.getCardType=function(){return this[b("CreditCardFormParam").CARD_TYPE]};a.prototype.setCardType=function(a){this[b("CreditCardFormParam").CARD_TYPE]=a,this.setCardProviderProps(a,this[b("CreditCardFormParam").CARD_NUMBER])};a.prototype.getCredentialId=function(){return this[b("CreditCardFormParam").CREDENTIAL_ID]};a.prototype.setCredentialId=function(a){this[b("CreditCardFormParam").CREDENTIAL_ID]=a};a.prototype.$1=function(a,c){var d="default",e;a?(e=Object.keys(b("CreditCardTypeEnum")).filter(function(c){return b("CreditCardTypeEnum")[c]===a})[0],d=this.$3(e)):c&&(e=b("PaymentMethodUtils").getCardType(c),e&&(d=e.name));return d};a.prototype.getImage=function(){return this.$4||i.unknown.image};a.prototype.setImage=function(a){this.$4=a};a.prototype.getImageLarge=function(){return this.$5||i.unknown.imageLarge};a.prototype.setImageLarge=function(a){this.$5=a};a.prototype.getName=function(){return this.$6||i.unknown.name};a.prototype.setName=function(a){this.$6=a};a.prototype.getIsPreset=function(){return this.$7};a.prototype.setIsPreset=function(a){this.$7=a||!1};a.prototype.$3=function(a){__p&&__p();switch(a){case"VISA":a="visa";break;case"AMERICANEXPRESS":a="amex";break;case"MASTERCARD":a="mc";break;case"DISCOVER":a="disc";break;case"JCB":a="jcb";break;default:a="unknown";break}return a};a.prototype.getCreditCardNumberFormatted=function(){return"*"+this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.getDetailsFormatted=function(){return this.getName()+" "+this.getCreditCardNumberFormatted()};a.prototype.getCreditCardNumberMask=function(){return"**** **** **** "+this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.getMaxCSCLength=function(){var a=this.$1(this[b("CreditCardFormParam").CARD_TYPE],this[b("CreditCardFormParam").CARD_NUMBER]);return a==="amex"?4:3};a.prototype.getIsVerified=function(){return this.$8||!1};a.prototype.setIsVerified=function(a){this.$8=a};a.prototype.getIsMobileVerified=function(){return this.$9||!1};a.prototype.setIsMobileVerified=function(a){this.$9=a};a.prototype.getIsPersonalTransferEligible=function(){return!!this.$10};a.prototype.setIsPersonalTransferEligible=function(a){this.$10=a};a.prototype.getCategory=function(){return this.$11};a.prototype.setCategory=function(a){this.$11=a};a.prototype.getCategoryName=function(){switch(this.$11){case b("P2PPaymentMethodCategory").DEBIT_CARD:return g._("Debit");case b("P2PPaymentMethodCategory").CREDIT_CARD:return g._("Credit");case b("P2PPaymentMethodCategory").PREPAID_CARD:return g._("Prepaid");default:return null}};a.prototype.isExpired=function(){var a=this.getExp();if(!a)return!1;var b=a.month;a=a.year;var c=new Date(),d=c.getFullYear()+"";c=c.getMonth()+1+"";c=c.length===1?"0"+c:c;return a<d||d===a&&b<c};e.exports=a}),null);
__d("P2PTransferStore",["Arbiter","ChannelConstants","CreditCardFormParam","CurrentUser","EventEmitter","ImmutableObject","P2PActionConstants","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PGKValues","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadInformer").get(),i=!1,j,k=[],l,m={},n=!1,o=!1,p=new Set(),q=!1,r=0;function s(a,c){c&&(m[c]=new(b("ImmutableObject"))(a))}function t(a,b){b&&(m[b]={error:a})}c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this)),h.subscribe("messages-received",this.handleMessageReceived.bind(this)),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").TRANSFERS_UPDATED:this.handleTransfersUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(c);this.emit("change");break;case b("P2PActionConstants").NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_ADDED:this.handleTransferAdded(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_UPDATED:this.handleTransferUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit("change");break;case b("P2PActionConstants").TRANSFER_DECLINED:this.handleTransferDeclined(c);this.emit("change");break;case b("P2PActionConstants").EXTENSIVE_TRANSFER_DETAILS_UPDATED:this.handleTransferWithExtensiveDetails(c);this.emit("change");break}};a.prototype.getAsyncRequestState=function(){return m};a.prototype.handleTransfersUpdated=function(a){__p&&__p();l=null;n=!0;var c=[];a=a.map(function(a){var d={},e=this.getTransferByID(a[b("P2PTransferParam").TRANSFER_ID]),f={};a.creditCard&&(d[b("CreditCardFormParam").CREDENTIAL_ID]=a.creditCard[b("CreditCardFormParam").CREDENTIAL_ID],d[b("CreditCardFormParam").CARD_NUMBER]=a.creditCard[b("CreditCardFormParam").CARD_NUMBER],d[b("CreditCardFormParam").CARD_TYPE]=a.creditCard[b("CreditCardFormParam").CARD_TYPE],a.creditCard=new(b("P2PCreditCard"))(d));if(e)for(var g in e)f[g]=a[g]!==null?a[g]:e[g];c.push(a[b("P2PTransferParam").TRANSFER_ID]);return new(b("ImmutableObject"))(a,f)}.bind(this));var d=k.filter(function(a){return c.indexOf(a[b("P2PTransferParam").TRANSFER_ID])===-1});k=a.concat(d);k=k.sort(function(a,b){return b.creationTime-a.creationTime})};a.prototype.handleTransfersUpdatedError=function(a){l=a.error,t(a.requestID,a.error)};a.prototype.handleNUXTransfersUpdated=function(a){n||this.handleTransfersUpdated(a)};a.prototype.handleTransferAdded=function(a){__p&&__p();var c;s(a,a.requestID);a&&a.sender&&a.sender.id===b("CurrentUser").getID()&&(q=!0);c=k.filter(function(c){return c[b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]})[0];if(c)return;k.push(new(b("ImmutableObject"))(a));k=k.sort(function(a,b){return b.creationTime-a.creationTime})};a.prototype.handleTransferAddedError=function(a){t(a.requestID,a.errors)};a.prototype.handleChannelTransferStatusChanged=function(a,c){c=c.obj,b("P2PActions").transferUpdated(c)};a.prototype.handleMessageReceived=function(a,c){__p&&__p();for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){a=c[d];for(var e=0;e<a.length;e++)if(a[e].attachments&&a[e].attachments.length){var f=b("P2PNUXRendererUtils").getTransferFromMessage(a[e]);if(f){!this.hasReceived()&&f.receiver.id===b("CurrentUser").getID()&&b("P2PAPI").getBannerStates();b("P2PActions").transferAdded(f);return}}}};a.prototype.handleTransferUpdated=function(a){for(var c=0,d=k.length;c<d;c++)k[c][b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]&&(k[c]=b("ImmutableObject").set(k[c],a))};a.prototype.handleTransferAccepted=function(){var a;for(var c=0,d=k.length;c<d;c++)k[c][b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX&&(a={},a[b("P2PTransferParam").STATUS]=b("P2PTransferStatus").COMPLETED,k[c]=b("ImmutableObject").set(k[c],a));o=!0};a.prototype.handleTransferDeclined=function(a){var c;for(var d=0,e=k.length;d<e;d++)if(k[d][b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]&&k[d][b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX){c={};c[b("P2PTransferParam").STATUS]=b("P2PTransferStatus").CANCELED_DECLINED;k[d]=b("ImmutableObject").set(k[d],c);break}};a.prototype.handleTransferUpdatedError=function(a){t(a.requestID,a.errors)};a.prototype.getTransferByID=function(a){return k.filter(function(c){return a===c[b("P2PTransferParam").TRANSFER_ID]})[0]};a.prototype.getAll=function(a){i||(i=!0,b("P2PAPI").getTransactions(a));return k};a.prototype.getNUXTransfer=function(){var a=k.filter(function(a){return b("P2PNUXRendererUtils").isRecipientActionableStatus(a)})[0];!a&&!j&&!i&&(j=!0,b("P2PAPI").getNUXTransactions());a&&!a.currency&&r++<3&&b("P2PAPI").getNUXTransactions();return a};a.prototype.hasTransfers=function(){return k.length>0};a.prototype.hasAccepted=function(){return o};a.prototype.hasReceivedFromSender=function(a){for(var b=0,c=k.length;b<c;b++)if(k[b].sender.id===a)return!0;return!1};a.prototype.hasReceived=function(){for(var a=0,c=k.length;a<c;a++)if(k[a].receiver.id===b("CurrentUser").getID())return!0;return!1};a.prototype.getTransferFetchError=function(){return l};a.prototype.getTransferWithExtensiveDetailsByID=function(a){p.has(a)||(p.add(a),b("P2PAPI").getExtensiveTransferDetailsByID(a))};a.prototype.handleTransferWithExtensiveDetails=function(a){this.getTransferByID(a.transfer_id)?this.handleTransferUpdated(a):this.handleTransferAdded(a)};a.prototype.getAllLocal=function(){return k};a.prototype.hasSentDuringSession=function(){return q};a.prototype.shouldShowSenderNUX=function(){return!b("P2PGKValues").P2PUserAddedCredentialBefore&&!this.hasSentDuringSession()};e.exports=new a()}),null);
__d("XWorkplaceDesktopDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/desktop/download/{?file}/",{file:{type:"String"},ref:{type:"String"}})}),null);