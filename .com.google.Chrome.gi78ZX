if (self.CavalryLogger) { CavalryLogger.start_js(["Os9B8"]); }

__d("AdsPill.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("span",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_3aqo"+(this.props.display==="inline"?" _1b1w":""))}),this.props.children)};function a(){h.apply(this,arguments)}a.propTypes={display:c.oneOf(["block","inline"])};a.defaultProps={display:"block"};e.exports=a}),null);
__d("AddUrlPillContainer.react",["cx","fbt","AdsPill.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=h._("Add link");return b("React").createElement(b("AdsPill.react"),{className:"_3xa8"},a)};function a(){i.apply(this,arguments)}a.propTypes={};e.exports=a}),null);
__d("CarouselPhotoPostConsts",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FAKE_URL:"http://www.facebook.com/carousel_photo_composer_fake_url",FAKE_HEADLINE:"ADD HEADLINE",IS_UPLOAD_PHOTO_FIRST:"is_upload_first"})}),null);
__d("IsReactComposerTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setIsReactComposer=function(a){this.$1.is_react_composer=a;return this};c={is_react_composer:!0};e.exports=a}),null);
__d("PagesComposerImageSources",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCRAPE:"scrape",UPLOAD:"upload",EXTRA_DOM:"extra_dom",PLACEHOLDER:"placeholder"})}),null);
__d("XCarouselPageComposerEliminateInvalidImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/carouselinvalidupload/",{eliminate_invalid_images:{type:"Bool",defaultValue:!1},exceed_max_number_images:{type:"Bool",defaultValue:!1},__asyncDialog:{type:"Int"}})}),null);
__d("ChildAttachmentsController",["csx","fbt","Arbiter","AsyncDialog","AsyncRequest","Bootloader","CarouselPhotoPostConsts","ComposerXController","CSS","DOM","IsReactComposerTypedLogger","JSXDOM","PagesComposerActionsLogger","PagesComposerCarouselPostChildAttachmentAttributes","PagesComposerCarouselPostLogAttributes","PagesComposerImageSources","PagesComposerPostActionsLoggerEvent","Parent","ReactComposerScrapedAttachmentActions","Run","URI","XCarouselPageComposerEliminateInvalidImageController","XUIError","ads-lib-urllib","sprintf"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=1024,j=null,k=[],l=null,m=null,n=null,o=null,p=null;a=null;var q=null,r=!1,s=!1,t="",u=null,v=null,w=!1,x=null,y=null,z=null,A=!1,B=null,C=null,D=null,E=null,F=!1,G="",H=[],I=!0,J={SUMMARY:"summary",TITLE:"title",init:function(c,d,e,f){j=b("Parent").bySelector(c,"._4tbq"),l=c,m=d,k=e,a=f,q=a.change_time,r=a.eliminate_invalid_images,s=a.exceed_maximum_number_images,t=a[b("PagesComposerCarouselPostLogAttributes").SCRAPED_URL],u=a.target_id,x=a.is_react_composer,y=a.composer_id,z=a.check_image_consistency,C=a[b("PagesComposerCarouselPostLogAttributes").SCRAPED_TIME],D=a[b("PagesComposerCarouselPostLogAttributes").COMPOSER_LOCATION],E=!1,F=a.image_cta,G=a.title,H=a.img_urls,I=a.can_edit_lpp,x&&this._setDOMReadyListenerInReactComposer(),this._initAllControllers(),b("Run").onLeave(function(){x&&B&&B.remove()})},_setDOMReadyListenerInReactComposer:function(){x&&y&&(B=b("Arbiter").subscribe(["react_composer_dom_ready/"+y.toString()],this._handleDOMReadyInReactComposer.bind(this)))},_handleDOMReadyInReactComposer:function(){A=!0,this._initAllControllers()},setupNux:function(a){v=a,this._checkChangeTimeAndDOMUpdateConsistent()&&!w&&(v.show(),w=!0)},getTargetID:function(){return u},getURL:function(){return t},_hideChild:function(a){if(!this._isIndexValid(a))return;k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=0;this._setInputNode(a,b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED,"0")},_unhideChild:function(a){if(!this._isIndexValid(a))return;k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=1;this._setInputNode(a,b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED,"1")},_setLppParam:function(a,b){var c=this.getSelectedIndices();c.length===0?this._setParentParam(a,b):this.setChildParam(c[0],a,b)},_setParentParams:function(a){this._setParentParam(b("PagesComposerCarouselPostChildAttachmentAttributes").NAME,this.getTitle(a)),this._setParentParam(b("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,this.getDescription(a))},_setParentParam:function(a,c){var d="";a===b("PagesComposerCarouselPostChildAttachmentAttributes").NAME?d=this.TITLE:a===b("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION?d=this.SUMMARY:!1;a=b("DOM").scry(j,b("sprintf")('input[name="attachment[params][%s]"]',d))[0];a||(a=b("JSXDOM").input({name:b("sprintf")("attachment[params][%s]",d),type:"hidden"}),b("DOM").appendContent(j,a));a.value=c;a=b("DOM").scry(j,b("sprintf")('input[name="%s"]',"xc_share_"+d));a.length&&(a[0].value=c)},setChildParam:function(a,b,c){__p&&__p();if(k.length<a){!1;return}else if(a<0){!1;return}k.length===a&&k.push({});k[a][b]=c;this._setInputNode(a,b,c)},unsetChildParam:function(a,c){if(!this._isIndexValid(a))return;delete k[a][c];a=b("sprintf")("attachment[params][child_attachments][%s][%s]",a,c);c=b("DOM").scry(j,b("sprintf")('input[name="%s"]',a))[0];c&&b("DOM").remove(c)},canEditLpp:function(){return I===null?!0:I},getChildParam:function(){return k},getChildNum:function(){return k.length},getValueFromDOM:function(a,c){a=b("sprintf")("attachment[params][child_attachments][%s][%s]",a,c);c=b("DOM").scry(j,b("sprintf")('input[name="%s"]',a))[0];return c?c.value:undefined},deleteChild:function(a){if(!this._isIndexValid(a))return;var b=k.length;for(;a<b;a++)this._deleteChild(a),a+1!==b&&this._copyChild(a+1,a)},addChild:function(a,b){var c=k.length;if(a<0||c<a){!1;return}c=c;for(;c>a;c--)this._copyChild(c-1,c),this._deleteChild(c-1);this._setChild(a,b)},isVideoAttachment:function(a){a=k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];return a!=null&&a!==0},registerLppJsInstance:function(a){n=a,this._checkChildAttachmentReady()&&this._initAllControllers()},registerCarouselJsInstance:function(a){o=a,this._checkChildAttachmentReady()&&this._initAllControllers()},registerUploadAreaJsInstance:function(a){p=a,this._checkChildAttachmentReady()&&this._initAllControllers()},_refreshImageClickRegister:function(){p&&p.refreshImageClickRegister()},_changePreviewDOMAfterDrag:function(a,c){__p&&__p();var d=b("DOM").scry(l,"._5ya"),e=d[a];b("DOM").remove(e);a>c?b("DOM").insertBefore(d[c],e):b("DOM").insertAfter(d[c],e);if(!o){!1;return}o.changeChildrenOrder(a,c);if(!n){!1;return}n.changeLPPPreviewOrder(a,c)},handleImageDragEvent:function(a,c){if(a===c)return;var d=JSON.stringify(J.getChildParam()[a]);J.deleteChild(a);J.addChild(c,JSON.parse(d));J._refreshImageClickRegister();J._changePreviewDOMAfterDrag(a,c);this._refreshRendering();this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_DRAG)},handleImageChangeEvent:function(a,c){this._hideChild(a),this._unhideChild(c),this._refreshRendering(),this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_CHANGE_LEFT_RIGHT)},handleImageSelectEvent:function(a){var c=J.getSelectedNum();this._unhideChild(a);this._hasPlaceholderAttachment()||(c===0?this._refreshLppPreview():c===1&&this._lppToCarousel());this._refreshRendering();this._informCarouselCardChange();this._checkIfPreviewReadyToPublish();this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_SELECT)},handleUploadAreaImageUnSelectEvent:function(a){this._handleImageUnSelectEvent(a),this._informCarouselCardChange(),this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_UPLOAD_BAR)},handleLppPreviewImageUnSelectEvent:function(a){this._handleImageUnSelectEvent(a),this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_LPP_CARD)},handleCarouselPreviewImageUnSelectEvent:function(a){this._handleImageUnSelectEvent(a),this._informCarouselCardChange(),this._log(b("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_CAROUSEL_CARD)},handleCarouselTitleChangeEvent:function(a,c){this.setChildParam(a,b("PagesComposerCarouselPostChildAttachmentAttributes").NAME,c),b("ReactComposerScrapedAttachmentActions").linkTitleEdited(y,a,c),this._log(b("PagesComposerPostActionsLoggerEvent").CAROUSEL_TITLE_EDIT)},handleCarouselDescriptionChangeEvent:function(a,c){this.setChildParam(a,b("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,c),b("ReactComposerScrapedAttachmentActions").linkDescriptionEdited(y,a,c),this._log(b("PagesComposerPostActionsLoggerEvent").CAROUSEL_DESCRIPTION_EDIT)},_isImageOriginal:function(a){if(H===null)return!1;a=k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").PICTURE];return H.includes(a)},_defaultToOriginalImageAndTitle:function(){__p&&__p();if(this.canEditLpp())return;var a=this.getSelectedIndices();if(a.length!==0&&!this._isImageOriginal(a[0])){var c=!1;this._hideChild(a[0]);for(var d=0;d<k.length;d++)if(this._isImageOriginal(d)){c=!0;this._unhideChild(d);break}c||this._unhideChild(a[0])}G!==null&&this._setLppParam(b("PagesComposerCarouselPostChildAttachmentAttributes").NAME,G)},handleLppTitleChangeEvent:function(a){this._setLppParam(b("PagesComposerCarouselPostChildAttachmentAttributes").NAME,a),this._log(b("PagesComposerPostActionsLoggerEvent").LPP_TITLE_EDIT)},handleLppDescriptionChangeEvent:function(a){this._setLppParam(b("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,a),this._log(b("PagesComposerPostActionsLoggerEvent").LPP_DESCRIPTION_EDIT)},_handleImageUnSelectEvent:function(a){this._hideChild(a);var c=J.getSelectedNum();this._hasPlaceholderAttachment()||(c===0?(n&&n.closeImage(a),b("ReactComposerScrapedAttachmentActions").setNoImagePreviewEdit(y,a),this._setParentParams(a)):c===1&&this._carouselToLpp());this._refreshRendering();this._checkIfPreviewReadyToPublish()},handleEditCTATypeEvent:function(a,c){if(!this._isIndexValid(a))return;this.setChildParam(a,b("PagesComposerCarouselPostChildAttachmentAttributes").CTA_TYPE,c)},handleEditUrlEvent:function(a,c){if(!this._isIndexValid(a))return;this.setChildParam(a,b("PagesComposerCarouselPostChildAttachmentAttributes").LINK,c);this._log(b("PagesComposerPostActionsLoggerEvent").EDIT_URL);this._refreshRendering();this._checkIfPreviewReadyToPublish()},handleEditAllUrlEvent:function(a){var c=this.getChildNum()-this.getPlaceholderIndices().length;for(var d=0;d<c;d++)this.handleEditUrlEvent(d,a);this._log(b("PagesComposerPostActionsLoggerEvent").EDIT_URL_APPLY_ALL);this._refreshRendering();this._checkIfPreviewReadyToPublish()},_informCarouselCardChange:function(){b("Arbiter").inform("carousel-composer/carousel_card_change")},_checkEliminateInvalidImages:function(){return r},_checkExceedMaximumNumberOfImages:function(){return s},_checkAddModalForEliminateInvalidImages:function(){if(this._checkEliminateInvalidImages()||this._checkExceedMaximumNumberOfImages()){var a=b("XCarouselPageComposerEliminateInvalidImageController").getURIBuilder().setBool("eliminate_invalid_images",this._checkEliminateInvalidImages()).setBool("exceed_max_number_images",this._checkExceedMaximumNumberOfImages()).getURI();new(b("AsyncRequest"))(a).send()}},_deleteChild:function(a){if(!this._isIndexValid(a))return;var c=k.length,d=Object.keys(b("PagesComposerCarouselPostChildAttachmentAttributes"));for(var e=0;e<d.length;e++){var f=b("PagesComposerCarouselPostChildAttachmentAttributes")[d[e]];this.unsetChildParam(a,f)}a===c-1&&k.pop()},_copyChild:function(a,b){__p&&__p();if(a<0||k.length<=a){!1;return}else if(b<0||k.length<b){!1;return}if(b===a)return;b===k.length?k.push({}):k[b]={};this._setChild(b,k[a])},_setChild:function(a,c){__p&&__p();if(k.length<a){!1;return}else if(a<0){!1;return}k.length===a&&k.push({});var d=Object.keys(b("PagesComposerCarouselPostChildAttachmentAttributes"));for(var e=0;e<d.length;e++){var f=b("PagesComposerCarouselPostChildAttachmentAttributes")[d[e]],g=c[f];g!==null&&g!==undefined&&this.setChildParam(a,f,g)}},_lppToCarousel:function(){this._refreshCarouselPreview(),this._hideLpp(),this._unhideCarousel(),this._informDragHandler()},_carouselToLpp:function(){this._refreshLppPreview(),this._hideCarousel(),this._unhideLpp(),this._informDragHandler()},_checkImageListEqual:function(a,b){if(a.length!==b.length)return-1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return 0;return 1},_getChildImageLinks:function(){var a=[];for(var b=0;b<k.length;b++)a.push(k[b].picture);return a},_checkImageConsistency:function(){if(n&&o&&p){var a=this._getChildImageLinks(),c=this._checkImageListEqual(a,n.getImageLinks()),d=this._checkImageListEqual(a,o.getImageLinks());a=this._checkImageListEqual(a,p.getImageLinks());var e=c===1&&d===1&&a===1;e||((c===0||d===0||a===0)&&this._log(b("PagesComposerPostActionsLoggerEvent").CHILD_IMAGES_LINK_INCONSISTENT),(c===-1||d===-1||a===-1)&&this._log(b("PagesComposerPostActionsLoggerEvent").CHILD_IMAGES_NUM_INCONSISTENT))}},_initAllControllers:function(){this._checkChangeTimeAndDOMUpdateConsistent()&&!E&&(this._initSetting(),this._refreshRendering(),this._checkIfPreviewReadyToPublish(),this._checkAddModalForEliminateInvalidImages(),z&&this._checkImageConsistency(),v&&!w&&(v.show(),w=!0),A=!1,E=!0)},_initSetting:function(){o&&o.initSetting()},_refreshRendering:function(){var a=this.getSelectedIndices();a.length>1?(this._hideLpp(),this._unhideCarousel(),this._refreshCarouselPreview()):a.length===1&&(this._hideCarousel(),this._unhideLpp(),this._refreshLppPreview());p&&(p.renderImageSelection(),p.updateScrollableArea())},_informDragHandler:function(){p&&p.updateScrollableArea()},_refreshCarouselPreview:function(){o&&o.render()},_refreshLppPreview:function(){this._defaultToOriginalImageAndTitle(),n&&n.render()},_hideLpp:function(){m&&b("CSS").hide(m)},_hideCarousel:function(){l&&b("CSS").hide(l)},_unhideLpp:function(){m&&b("CSS").show(m)},_unhideCarousel:function(){l&&b("CSS").show(l)},_setInputNode:function(a,c,d){a=b("sprintf")("attachment[params][child_attachments][%s][%s]",a,c);c=b("DOM").scry(j,b("sprintf")('input[name="%s"]',a))[0];c||(c=b("JSXDOM").input({name:a,type:"hidden"}),b("DOM").appendContent(j,c));c.value=d},getSelectedIndices:function(){var a=[];for(var c=0;c<k.length;c++)k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&a.push(c);return a},getSelectedNum:function(){var a=0;for(var c=0;c<k.length;c++)k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&a++;return a},getNonPlaceholderSelectedIndices:function(){var a=[];for(var c=0;c<k.length;c++)k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]!==b("PagesComposerImageSources").PLACEHOLDER&&a.push(c);return a},getFrontSelectedNum:function(a){var b=0;for(var c=0;c<a&&c<k.length;c++)this.isSelected(c)&&b++;return b},isSelected:function(a){return this._isIndexValid(a)?k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]!==0:!1},getPlaceholderIndices:function(){var a=[];for(var c=0;c<k.length;c++)k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]===b("PagesComposerImageSources").PLACEHOLDER&&a.push(c);return a},getSelectedPlaceholderIndices:function(){var a=[];for(var c=0;c<k.length;c++)k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]===b("PagesComposerImageSources").PLACEHOLDER&&k[c][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]===1&&a.push(c);return a},isPlaceholder:function(a){if(!this._isIndexValid(a))return!1;a=this.getChildParam()[a];return a[b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]===b("PagesComposerImageSources").PLACEHOLDER},_hasPlaceholderAttachment:function(){for(var a=0;a<k.length;a++)if(k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]===b("PagesComposerImageSources").PLACEHOLDER)return!0;return!1},hasFakeLink:function(a){return!this._isIndexValid(a)?!1:this.getLink(a)===b("CarouselPhotoPostConsts").FAKE_URL},getDescription:function(a){return this._isIndexValid(a)?k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION]:""},getTitle:function(a){return this._isIndexValid(a)?k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").NAME]:""},getLink:function(a){return this._isIndexValid(a)?k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").LINK]:""},getCTAType:function(a){return this._isIndexValid(a)?k[a][b("PagesComposerCarouselPostChildAttachmentAttributes").CTA_TYPE]:""},refresh:function(){__p&&__p();if(q===null){!1;return}b("Arbiter").inform("carousel-composer/pending-click-handle/"+q.toString());var a=b("Parent").bySelector(j,"._9u");a=b("DOM").scry(a,"._9s")[0];a&&b("CSS").addClass(a,"hidden_elem");a=null;new(b("IsReactComposerTypedLogger"))().setIsReactComposer(x).log();if(x){a={child_attachments:JSON.stringify(this.getChildParam()),change_time:q+1,scraped_time:C,action:"UPLOAD"};b("ReactComposerScrapedAttachmentActions").uploadImagesForCarousel({composerID:y,targetID:u,scrapeUrl:t,carouselParams:JSON.stringify(a),entryPoint:D,actorID:u});return}else{var c=this._getScraperEndpoint();a={child_attachments:this.getChildParam(),change_time:q+1,scraped_time:C,action:"UPLOAD"};c.addQueryData({scrape_url:encodeURIComponent(this.getURL()),carousel_params:a});b("ComposerXController").getAttachment(j,c.toString(),null,!0);return}},_isIndexValid:function(a){if(k.length<=a){!1;return!1}else if(a<0){!1;return!1}return!0},_checkChangeTimeAndDOMUpdateConsistent:function(){return p!==null&&n!==null&&o!==null&&q!==null&&q===p.getChangeTime()&&q===n.getChangeTime()&&q===o.getChangeTime()&&(!x||A)},_checkChildAttachmentReady:function(){return l!==null&&m!==null&&k!==null&&q!==null},_log:function(event){var a=babelHelpers["extends"]({child_attachments:this.getChildParam(),event:event,target_id:u,is_old_composer:!1},{});a[b("PagesComposerCarouselPostLogAttributes").SCRAPED_URL]=t;b("PagesComposerActionsLogger").log(a)},_getScraperEndpoint:function(){return new(b("URI"))("/ajax/composerx/attachment/link/scraper/")},_checkIfPreviewReadyToPublish:function(){__p&&__p();var a=!0;if(!x)return;var c=this.getSelectedPlaceholderIndices();c.length!==0&&(a=!1);c=this.getNonPlaceholderSelectedIndices();for(var d=0;d<c.length;d++)if(this.hasFakeLink(c[d])){a=!1;break}b("Bootloader").loadModules(["ReactComposerPhotoCarouselActions"],function(b){a?b.setPreviewCompleted(y):b.setPreviewIncompleted(y)},"ChildAttachmentsController")},editUrl:function(a,c,d){__p&&__p();var e=this.isVideoAttachment(a)||F;d={link:c?this.getURL():this.getLink(a),len:i,showcheckbox:d,showcta:e,selectedcta:this.getCTAType(a)};b("AsyncDialog").send(new(b("AsyncRequest"))("/composer/carouselediturl/").setData(d),function(d){__p&&__p();var e=b("DOM").scry(d.getInnerContent(),"textarea")[0];e.disabled=c;d.subscribe("confirm",function(){__p&&__p();var c=b("DOM").scry(d.getInnerContent(),"._eeb")[0],e=b("DOM").scry(d.getInnerContent(),".uiContextualLayerParent")[0];if(!c){d.hide();return}c=c.value;var f="";!c?f=h._("Please provide Destination URL."):c.length>i?f=h._("Your Destination URL exceeds {length} characters.",[h._param("length",i)]):b("ads-lib-urllib").isUrl(c)||(f=h._("Your Destination URL is not properly formatted."));if(f){var g=b("DOM").scry(d.getInnerContent(),"._2vl9")[0];b("XUIError").set({target:g,message:f});return}g=b("DOM").scry(d.getInnerContent(),"._301j")[0];g&&g.firstChild.checked?this.handleEditAllUrlEvent(c):(this.handleEditUrlEvent(a,c),e&&this.handleEditCTATypeEvent(a,e.getAttribute("value")));d.hide();this.refresh();return}.bind(this))}.bind(this))}};e.exports=J}),null);
__d("EditComposerChildAttachment",["csx","cx","ActorURI","AsyncDialog","AsyncRequest","ChildAttachmentsController","CSS","DOM","Event","JSXDOM","PagesComposerCarouselPostChildAttachmentAttributes","Run","VideoEditSource","XVideoEditDialogController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=100,j=100;function a(a,c){__p&&__p();this.$3=c;this.$1=a;this.$8=b("DOM").scry(this.$1,"._1m-h")[0];this.$4=b("DOM").scry(this.$1,"._1032")[0];this.$5=!1;this.$9=!1;this.$6=b("Event").listen(this.$4,"click",function(){if(!this.$5){var a=this.titleOnChange;this.clickHandler(this.$4,a,i);this.$5=!0}}.bind(this));this.$8&&(this.$10=b("Event").listen(this.$8,"click",function(){if(!this.$9){var a=this.descriptionOnChange;this.clickHandler(this.$8,a,j);this.$9=!0}}.bind(this)));c=b("DOM").scry(this.$1,"._5ngn")[0];c&&(this.$11=b("Event").listen(c,"click",function(){this.$14()}.bind(this)));a=b("DOM").scry(this.$1,"._ee9")[0];c=b("DOM").scry(this.$1,"._2ips")[0];c&&(this.$7=b("Event").listen(c,"click",function(){this.$15()}.bind(this)));a&&(this.$12=b("Event").listen(a,"click",function(){this.$16(!1)}.bind(this)));c=b("DOM").scry(this.$1,"._3sd0")[0];c&&(this.$13=b("Event").listen(c,"click",function(){this.$16(!0)}.bind(this)));this.render();b("Run").onLeave(this.cleanup.bind(this))}a.prototype.render=function(){b("ChildAttachmentsController").isPlaceholder(this.$3)&&(this.$17(),this.$18(),this.$19(),this.$20(),this.$21(),this.$22()),b("ChildAttachmentsController").hasFakeLink(this.$3)?(this.$17(),this.$23()):(this.$18(),this.$24(),this.$25(),this.$26())};a.prototype.setCardIndex=function(a){this.$3=a};a.prototype.cleanup=function(){__p&&__p();this.$6&&this.$6.remove();this.$6={};this.$10&&this.$10.remove();this.$10={};this.$11&&this.$11.remove();this.$11={};var a=b("DOM").scry(this.$1,"._5ngn")[0];a&&b("CSS").addClass(a,"hidden_elem");this.$12&&this.$12.remove();this.$12={};this.$17();this.$13&&this.$13.remove();this.$13={};this.$18();this.$7&&this.$7.remove();this.$7={};this.$22()};a.prototype.clickHandler=function(a,c,d){a=b("DOM").scry(a,"._5cy7")[0];this.$2=b("JSXDOM").textarea({maxlength:d,value:a.firstChild.nodeValue});b("CSS").addClass(this.$2,"_33ms");this.$2.onblur=this.onBlur.bind(this);this.$2.onchange=c.bind(this);b("DOM").replace(a,this.$2);this.$2.focus();this.$2.select()};a.prototype.onBlur=function(){var a=b("JSXDOM").span({"class":"_5cy7"},this.$2.value);b("DOM").insertBefore(this.$2,a);b("DOM").remove(this.$2);this.$5=!1;this.$9=!1};a.prototype.titleOnChange=function(){b("ChildAttachmentsController").handleCarouselTitleChangeEvent(this.$3,this.$2.value)};a.prototype.descriptionOnChange=function(){b("ChildAttachmentsController").handleCarouselDescriptionChangeEvent(this.$3,this.$2.value)};a.prototype.$14=function(){b("ChildAttachmentsController").handleCarouselPreviewImageUnSelectEvent(this.$3)};a.prototype.$15=function(){var a=b("ChildAttachmentsController").getChildParam()[this.$3];a=a[b("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",a).setEnum("source",b("VideoEditSource").CAROUSEL_PREVIEW);a=b("ActorURI").create(a.getURI(),b("ChildAttachmentsController").getTargetID());b("AsyncDialog").send(new(b("AsyncRequest"))(a),function(a){a.subscribe("hide",function(){b("ChildAttachmentsController").refresh()})})};a.prototype.$16=function(a){b("ChildAttachmentsController").editUrl(this.$3,!1,a)};a.prototype.$17=function(){var a=b("DOM").scry(this.$1,"._ee9")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$22=function(){var a=b("DOM").scry(this.$1,"._2ips")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$20=function(){this.$4&&!b("CSS").hasClass(this.$4,"hidden_elem")&&b("CSS").addClass(this.$4,"hidden_elem")};a.prototype.$21=function(){this.$8&&!b("CSS").hasClass(this.$8,"hidden_elem")&&b("CSS").addClass(this.$8,"hidden_elem")};a.prototype.$19=function(){var a=b("DOM").scry(this.$1,"._5ngn")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$18=function(){var a=b("DOM").scry(this.$1,"._3sd0")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$23=function(){var a=b("DOM").scry(this.$1,"._g5g")[0];a&&(b("CSS").matchesSelector(a,"._3scy")||b("CSS").addClass(a,"_3scy"))};a.prototype.$26=function(){var a=b("DOM").scry(this.$1,"._g5g")[0];a&&(b("CSS").matchesSelector(a,"._3scy")&&b("CSS").removeClass(a,"_3scy"))};a.prototype.$24=function(){var a=b("DOM").scry(this.$1,"._ee9")[0];a&&b("CSS").hasClass(a,"hidden_elem")&&b("CSS").removeClass(a,"hidden_elem")};a.prototype.$25=function(){var a=b("DOM").scry(this.$1,"._2ips")[0];a&&b("CSS").hasClass(a,"hidden_elem")&&b("CSS").removeClass(a,"hidden_elem")};e.exports=a}),null);
__d("EditComposerCarouselAttachment",["csx","Arbiter","ChildAttachmentsController","CSS","DOM","EditComposerChildAttachment","Parent","Run","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();h.init=function(a,b){return new h(a,b)};function h(a,c){this.$1=a,this.$3=c,this.$2=[],this.$4=b("Arbiter").subscribe(["carousel-composer/pending-click-handle/"+this.getChangeTime().toString()],this.$6.bind(this)),b("ChildAttachmentsController").registerCarouselJsInstance(this),b("Run").onLeave(function(){this.$4&&this.$4.remove()})}h.prototype.render=function(){__p&&__p();var a=b("DOM").scry(this.$1,"._5ya"),c=b("ChildAttachmentsController").getChildNum();for(var d=0;d<c;d++){var e=a[d];this.$7(e,b("ChildAttachmentsController").getDescription(d));this.$8(e,b("ChildAttachmentsController").getTitle(d));b("ChildAttachmentsController").isSelected(d)?b("CSS").removeClass(e,"hidden_elem"):b("CSS").addClass(e,"hidden_elem");this.$2[d].render()}if(!this.$5){e=b("Parent").bySelector(this.$1,"._9u");this.$5=b("DOM").scry(e,"._9s")[0]}this.$5&&b("CSS").addClass(this.$5,"hidden_elem")};h.prototype.initSetting=function(){var a=b("DOM").scry(this.$1,"._5ya"),c=b("ChildAttachmentsController").getChildNum();for(var d=0;d<c;d++)this.$2.push(new(b("EditComposerChildAttachment"))(a[d],d))};h.prototype.getChangeTime=function(){return this.$3.change_time};h.prototype.changeChildrenOrder=function(a,b){__p&&__p();if(a===b)return;var c=this.$2[a];if(a<b)for(var d=a;d<b;d++)this.$2[d]=this.$2[d+1];else for(d=a;d>b;d--)this.$2[d]=this.$2[d-1];this.$2[b]=c;for(d=0;d<this.$2.length;d++)this.$2[d].setCardIndex(d)};h.prototype.getImageLinks=function(){var a=b("DOM").scry(this.$1,"._kvn"),c=[];for(var d=0;d<a.length;d++){var e=new(b("URI"))(a[d].src);c.push(e.getQueryData().url)}return c};h.prototype.$7=function(a,c){a=b("DOM").scry(a,"._1m-h")[0];if(!a)return;a=b("DOM").scry(a,"._5cy7")[0];b("DOM").setContent(a,c)};h.prototype.$8=function(a,c){a=b("DOM").scry(a,"._1032")[0];a=b("DOM").scry(a,"._5cy7")[0];b("DOM").setContent(a,c)};h.prototype.$6=function(){for(var a=0;a<this.$2.length;a++)this.$2[a].cleanup()};e.exports=h}),null);
__d("EditComposerLppUnderCarouselAttachment",["csx","cx","ActorURI","Arbiter","AsyncDialog","AsyncRequest","ChildAttachmentsController","CSS","DOM","Event","JSXDOM","LitestandShareAttachment","PagesComposerCarouselPostChildAttachmentAttributes","Parent","ReactComposerScrapedAttachmentActions","Run","Style","URI","VideoEditSource","XVideoEditDialogController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=15,j=250,k=70,l=100;function a(a,c,d){__p&&__p();this.titleOnChange=function(){b("ChildAttachmentsController").handleLppTitleChangeEvent(this.$17.value),b("ReactComposerScrapedAttachmentActions").linkTitleEdited(this.$16,this.$45(),this.$17.value)}.bind(this);this.descriptionOnChange=function(){b("ChildAttachmentsController").handleLppDescriptionChangeEvent(this.$17.value),b("ReactComposerScrapedAttachmentActions").linkDescriptionEdited(this.$16,this.$45(),this.$17.value)}.bind(this);this.$1=a;this.$2=c;this.$38=d;this.$16=d.composer_id;this.$39=this.$38.change_time;this.$40=b("Arbiter").subscribe(["carousel-composer/pending-click-handle/"+this.getChangeTime().toString()],this.cleanup.bind(this));this.$3=b("Parent").bySelector(this.$1,"._4tbq");this.$4=b("DOM").scry(this.$3,"._6m2")[0];this.$5=b("DOM").scry(this.$1,"._2r3x")[0];this.$6=b("DOM").scry(this.$5,"._3m6-")[0];this.$7=b("DOM").scry(this.$5,"._3c21")[0];this.$8=b("DOM").scry(this.$1,"._3e-u")[0];this.$11="_51cc";this.$12="_59ap";this.$13="_5cwb";this.$14="_po-";this.$15="_3e-t";this.$24=b("DOM").scry(this.$1,"._275z")[0];this.$19=b("DOM").scry(this.$1,"._5q4r")[0];this.$29=b("DOM").scry(this.$1,"._275x")[0];this.$28=b("DOM").scry(this.$1,"._1s4d")[0];this.$29&&b("CSS").addClass(this.$29,"_6m3");this.$28&&b("CSS").addClass(this.$28,"_59tj");if(this.$24){a=document.createElement("div");b("CSS").addClass(a,"_6m6");b("CSS").addClass(this.$24,"_5cy7");b("DOM").replace(this.$24,a);a.appendChild(this.$24);this.$24=a}if(this.$19){c=document.createElement("div");b("CSS").addClass(c,"_6m7");b("CSS").addClass(c,"_3bt9");b("CSS").addClass(this.$19,"_5cy7");b("DOM").replace(this.$19,c);c.appendChild(this.$19);this.$19=c}this.$25=b("DOM").scry(this.$1,"._6m6")[0];this.$20=b("DOM").scry(this.$1,"._6m7")[0];if(d.is_video_lpp){a=b("DOM").scry(this.$1,"._275_")[0];a.parentNode.removeChild(a)}b("ChildAttachmentsController").canEditLpp()&&this.$25&&(this.$26=b("Event").listen(this.$25,"click",function(){if(!this.$27){var a=this.titleOnChange;this.clickHandler(this.$25,a,l);this.$27=!0}}.bind(this)));b("ChildAttachmentsController").canEditLpp()&&this.$20&&(this.$21=b("Event").listen(this.$20,"click",function(){if(!this.$22){var a=this.descriptionOnChange;this.clickHandler(this.$20,a,j);this.$22=!0}}.bind(this)));c=b("DOM").scry(this.$1,"._4g6m")[0];d=b("DOM").scry(this.$1,"._4g6n")[0];d&&(this.$41=b("Event").listen(d,"click",function(){this.$43()}.bind(this)));c&&(this.$42=b("Event").listen(c,"click",function(){this.$44()}.bind(this)));this.$10=b("DOM").scry(this.$1,"._146d")[0];this.$33={Right:0,Left:1};this.$30=this.$2.length;this.$30&&(this.$34=b("DOM").scry(this.$4,"._k7m")[0],this.$35=b("DOM").scry(this.$4,"._3ekx")[0]);this.$8&&b("DOM").remove(this.$8);this.$30<=1?b("CSS").addClass(this.$10,"hidden_elem"):(b("CSS").addClass(this.$10,"UIThumbPagerControl_First"),this.$31=b("DOM").scry(this.$1,".UIThumbPagerControl_Button_Left")[0],this.$32=b("DOM").scry(this.$1,".UIThumbPagerControl_Button_Right")[0],b("CSS").addClass(this.$10,"UIThumbPagerControl_First"),this.$36=b("Event").listen(this.$31,"click",function(){this.$45()>0&&this.thumbHandler(this.$33.Left)}.bind(this)),this.$37=b("Event").listen(this.$32,"click",function(){var a=this.$45();if(a<0)return;a+1<this.$30&&this.thumbHandler(this.$33.Right)}.bind(this)));b("ChildAttachmentsController").registerLppJsInstance(this);b("Run").onLeave(function(){this.cleanup(),this.$40&&this.$40.remove()})}a.prototype.clickHandler=function(a,c,d){__p&&__p();var e=b("DOM").scry(a,"._5cy7")[0];this.$17=b("JSXDOM").textarea({maxlength:d,value:e.firstChild.nodeValue});if(b("CSS").matchesSelector(a,"._6m7")){d=Math.min(b("LitestandShareAttachment").getNumDescriptionLines(this.$1)*i,k);b("Style").set(this.$17,"height",d+"px")}b("CSS").matchesSelector(this.$4,"._59ap")||b("CSS").matchesSelector(this.$4,"._6m4")?b("CSS").addClass(this.$17,"_1r8i"):b("CSS").addClass(this.$17,"_4xe4");this.$17.onblur=this.onBlur.bind(this);this.$17.onchange=c.bind(this);b("DOM").replace(e,this.$17);this.$17.focus();this.$17.select()};a.prototype.onBlur=function(){var a=b("JSXDOM").span({"class":"_5cy7"},this.$17.value);b("DOM").insertBefore(this.$17,a);b("DOM").remove(this.$17);b("LitestandShareAttachment").init(this.$1);this.$22=!1;this.$27=!1};a.prototype.thumbHandler=function(a){var c=this.$45(),d=c;a==this.$33.Left?d=c-1:a==this.$33.Right&&(d=c+1);b("ChildAttachmentsController").handleImageChangeEvent(c,d)};a.prototype.getMediaElem=function(a){var c=b("DOM").scry(this.$1,"._k7m")[0];return c.children[a]};a.prototype.render=function(){__p&&__p();this.showButtons();var a=this.$45();if(a<0)return;this.hideAllImages();var c=this.getMediaElem(a);this.$2[a][1]?(b("CSS").removeClass(this.$4,this.$11),b("CSS").removeClass(this.$4,this.$13),b("CSS").addClass(this.$4,this.$12)):this.$2[a][2]?(b("CSS").addClass(this.$4,this.$11),b("CSS").addClass(this.$4,this.$13),b("CSS").removeClass(this.$4,this.$12)):(b("CSS").removeClass(this.$4,this.$11),b("CSS").addClass(this.$4,this.$13),b("CSS").removeClass(this.$4,this.$12));b("CSS").removeClass(c,"hidden_elem");b("DOM").remove(this.$35);b("DOM").remove(this.$34);b("DOM").appendContent(this.$6,this.$34);b("CSS").hasClass(this.$4,this.$12)?b("DOM").appendContent(this.$6,this.$35):b("DOM").appendContent(this.$7,this.$35);this.reloadNodeInfo(a);a===0?(b("CSS").addClass(this.$10,"UIThumbPagerControl_First"),b("CSS").removeClass(this.$10,"UIThumbPagerControl_Last")):a+1===this.$30?(b("CSS").addClass(this.$10,"UIThumbPagerControl_Last"),b("CSS").removeClass(this.$10,"UIThumbPagerControl_First")):(b("CSS").removeClass(this.$10,"UIThumbPagerControl_First"),b("CSS").removeClass(this.$10,"UIThumbPagerControl_Last"));if(!this.$9){c=b("Parent").bySelector(this.$3,"._9u");this.$9=b("DOM").scry(c,"._9s")[0]}this.$9&&b("CSS").removeClass(this.$9,"hidden_elem");this.showSettingButtons()};a.prototype.showSettingButtons=function(){var a=this.$45();a=b("ChildAttachmentsController").isVideoAttachment(a);a?(this.$46(),this.$47()):(this.$48(),this.$49())};a.prototype.hideAllImages=function(){for(var a=0;a<this.$30;a++){var c=this.getMediaElem(a);b("CSS").addClass(c,"hidden_elem")}};a.prototype.changeLPPPreviewOrder=function(a,c){if(a===c)return;var d=this.getMediaElem(a),e=this.getMediaElem(c);b("DOM").remove(d);a>c?b("DOM").insertBefore(e,d):b("DOM").insertAfter(e,d);e=this.$2.splice(a,1);this.$2.splice(c,0,e[0])};a.prototype.getChangeTime=function(){return this.$39};a.prototype.hideButtons=function(){b("CSS").addClass(this.$10,"hidden_elem")};a.prototype.showButtons=function(){this.$30>1&&b("CSS").removeClass(this.$10,"hidden_elem")};a.prototype.reloadNodeInfo=function(a){__p&&__p();if(a<0)return;if(this.$20){var c=b("ChildAttachmentsController").getValueFromDOM(a,"description"),d=b("DOM").scry(this.$20,"._5cy7")[0];!b("ChildAttachmentsController").canEditLpp()&&d&&b("CSS").removeClass(d,"_5cy7");d&&b("DOM").setContent(d,c)}if(this.$25){d=b("ChildAttachmentsController").getValueFromDOM(a,"name");c=b("DOM").scry(this.$25,"._5cy7")[0];!b("ChildAttachmentsController").canEditLpp()&&c&&b("CSS").removeClass(c,"_5cy7");c&&b("DOM").setContent(c,d)}b("LitestandShareAttachment").init(this.$1)};a.prototype.closeImage=function(a){this.hideAllImages(),this.hideButtons(),this.reloadNodeInfo(a)};a.prototype.cleanup=function(){b("CSS").addClass(this.$10,"hidden_elem"),this.$21&&this.$21.remove(),this.$26&&this.$26.remove(),this.$36&&this.$36.remove(),this.$37&&this.$37.remove(),this.$42&&this.$42.remove(),this.$41&&this.$41.remove(),this.$46(),this.$47()};a.prototype.getImageLinks=function(){var a=b("DOM").scry(this.$4,"._6m5"),c=[];for(var d=0;d<a.length;d++){var e=new(b("URI"))(a[d].firstChild.src),f=e.getQueryData().url;f||(f=e.toString());c.push(f)}return c};a.prototype.$47=function(){var a=b("DOM").scry(this.$1,"._4g6n")[0];a&&b("CSS").hasClass(a,"hidden_elem")&&b("CSS").removeClass(a,"hidden_elem")};a.prototype.$49=function(){var a=b("DOM").scry(this.$1,"._4g6n")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$46=function(){var a=b("DOM").scry(this.$1,"._4g6m")[0];a&&b("CSS").hasClass(a,"hidden_elem")&&b("CSS").removeClass(a,"hidden_elem")};a.prototype.$48=function(){var a=b("DOM").scry(this.$1,"._4g6m")[0];a&&!b("CSS").hasClass(a,"hidden_elem")&&b("CSS").addClass(a,"hidden_elem")};a.prototype.$45=function(){var a=b("ChildAttachmentsController").getSelectedIndices();return a.length==0?-1:a[0]};a.prototype.$44=function(){b("ChildAttachmentsController").editUrl(this.$45(),!0,!1)};a.prototype.$43=function(){var a=this.$45();a=b("ChildAttachmentsController").getChildParam()[a];a=a[b("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",a).setEnum("source",b("VideoEditSource").CAROUSEL_PREVIEW);a=b("ActorURI").create(a.getURI(),b("ChildAttachmentsController").getTargetID());b("AsyncDialog").send(new(b("AsyncRequest"))(a),function(a){a.subscribe("hide",function(){b("ChildAttachmentsController").refresh()})})};e.exports=a}),null);
__d("ComposerXCarouselUploadArea",["csx","cx","fbt","Arbiter","CarouselPhotoPostConsts","ChildAttachmentsController","CSS","DOM","Event","PagesComposerCarouselPostChildAttachmentAttributes","PagesComposerImageSources","PhotosMultiUploadInput","Rect","Run","URI"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();function a(a,c,d,e){"use strict";this.$1=a,this.$2=c,this.$3=d,this.$6=e,this.$7=this.$6.max_selected,this.$8=this.$6.change_time,this.$12=0,this.$4=[],this.$13(),this.$14(),this.$9=b("Arbiter").subscribe(["multi-upload/medias-added/"+this.$3],this.$15.bind(this)),b("ChildAttachmentsController").registerUploadAreaJsInstance(this),this.$10=b("Arbiter").subscribe(["multi-upload/images-upload-start/"+this.$3],this.$16.bind(this)),this.$11=b("Arbiter").subscribe(["drag-and-drop/"+this.$3],this.$17.bind(this)),b("Run").onLeave(function(){this.$18(),this.$9.remove(),this.$10.remove(),this.$11.remove()})}a.prototype.getChangeTime=function(){"use strict";return this.$8};a.prototype.reset=function(){"use strict";this.removeImageUploadArea()};a.prototype.removeImageUploadArea=function(){"use strict";b("DOM").scry(this.$1,"._yr").forEach(function(a){b("CSS").matchesSelector(a,"._2oh")||b("DOM").remove(a)});b("DOM").scry(this.$1,"._579").forEach(function(a){b("CSS").matchesSelector(a,"._2oh")||b("DOM").remove(a)});var a=this.$2.getUploadInput().getGrid();a?a.clearSession():b("PhotosMultiUploadInput").clearSession(this.$3);b("Arbiter").inform(["multi-upload/all-images-removed/"+this.$3,"multi-upload/all-images-removed"])};a.prototype.$19=function(){"use strict";var a=b("ChildAttachmentsController").getSelectedNum(),c=b("ChildAttachmentsController").getSelectedPlaceholderIndices().length;a-=c;return a<this.$7?1:0};a.prototype.$20=function(){"use strict";var a=b("ChildAttachmentsController").getChildNum(),c=b("ChildAttachmentsController").getPlaceholderIndices().length;return a-c};a.prototype.$15=function(event,a){"use strict";__p&&__p();a=a.params;var c=this.$20(),d=b("ChildAttachmentsController").getURL(),e=b("ChildAttachmentsController").getSelectedNum();for(var f=0;f<a.length;f++){a[f][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_FBID]!=null&&(a[f][b("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]=b("PagesComposerImageSources").UPLOAD);var g=0;e<this.$7&&(g=1,e++);a[f][b("PagesComposerCarouselPostChildAttachmentAttributes").LINK]=d;a[f][b("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=g;a[f][b("PagesComposerCarouselPostChildAttachmentAttributes").SCRAPED]=0;d===b("CarouselPhotoPostConsts").FAKE_URL&&(a[b("PagesComposerCarouselPostChildAttachmentAttributes").NAME]=b("CarouselPhotoPostConsts").FAKE_HEADLINE);b("ChildAttachmentsController").addChild(c+f,a[f])}b("ChildAttachmentsController").refresh()};a.prototype.renderImageSelection=function(){"use strict";this.$21()};a.prototype.$17=function(a,c){"use strict";b("ChildAttachmentsController").handleImageDragEvent(c.previousIndex,c.currentIndex)};a.prototype.refreshImageClickRegister=function(){"use strict";this.$18(),this.$13()};a.prototype.$21=function(){"use strict";this.$22();var a=b("DOM").scry(this.$1,".fbVaultGridItem");for(var c=0;c<a.length;c++){var d=b("DOM").find(a[c],".fbVaultGridImage");b("ChildAttachmentsController").isSelected(c)?(b("CSS").addClass(d,"_4pcc"),b("CSS").removeClass(d,"_4pcd"),b("DOM").appendContent(d,this.$23(c))):(b("CSS").addClass(d,"_4pcd"),b("CSS").removeClass(d,"_4pcc"))}};a.prototype.$22=function(){"use strict";var a=b("DOM").scry(this.$1,"._5xnt");for(var c=0;c<a.length;c++)b("DOM").remove(a[c])};a.prototype.$23=function(a){"use strict";a=b("ChildAttachmentsController").getFrontSelectedNum(a)+1;return b("DOM").create("div",{className:"_5xnt"},b("DOM").create("div",{className:"_5xoq"},b("DOM").create("h",null,a)))};a.prototype.$14=function(){"use strict";var a=b("DOM").scry(this.$1,"._540u");this.$5=b("Event").listen(a[0],"click",function(){var c=b("DOM").scry(this.$1,"._540y");b("CSS").toggleClass(c[0],"hidden_elem");c=this.$12===0?i._("Show"):i._("Hide");this.$12=1-this.$12;b("DOM").setContent(a[0],c)}.bind(this))};a.prototype.$16=function(){"use strict";this.$18()};a.prototype.$13=function(){"use strict";var a=b("DOM").scry(this.$1,".fbVaultGridItem");for(var c=0;c<a.length;c++)this.$4.push(b("Event").listen(a[c],"click",function(a){this.$24(a)}.bind(this,c)))};a.prototype.$18=function(){"use strict";for(var a=0;a<this.$4.length;a++)this.$4[a].remove();this.$4=[]};a.prototype.$24=function(a){"use strict";var c=b("ChildAttachmentsController").isSelected(a)?b("ChildAttachmentsController").getSelectedNum()-1:b("ChildAttachmentsController").getSelectedNum()+1;if(c>this.$7)return;c=!b("ChildAttachmentsController").isSelected(a);c?b("ChildAttachmentsController").handleImageSelectEvent(a):b("ChildAttachmentsController").handleUploadAreaImageUnSelectEvent(a)};a.prototype.updateScrollableArea=function(){"use strict";var a=b("DOM").scry(this.$1,".fbScrollableArea");a=new(b("Rect"))(a[0]);b("Arbiter").inform("set-bounding-box/"+this.$3,a)};a.prototype.getImageLinks=function(){"use strict";var a=b("DOM").scry(this.$1,".fbVaultGridImage"),c=[];for(var d=0;d<a.length;d++){var e=new(b("URI"))(a[d].firstChild.src);c.push(e.getQueryData().url)}return c};e.exports=a}),null);